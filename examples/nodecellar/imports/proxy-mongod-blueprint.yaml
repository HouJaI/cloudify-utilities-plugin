inputs:

  mongod_host_deployment_id:
    type: string

node_types:

  nodecellar.nodes.MongoDatabase2:
    derived_from: cloudify.nodes.DBMS
    properties:
      port:
        default: 27017

node_templates:

  mongod:
    type: nodecellar.nodes.MongoDatabase2
    relationships:
      - type: cloudify.relationships.contained_in
        target: mongod_host

  mongod_host:
    type: cloudify.nodes.DeploymentProxy.Compute
    properties:
      resource_config:
        deployment_id: { get_input: mongod_host_deployment_id }
        outputs:
          ip: ip
