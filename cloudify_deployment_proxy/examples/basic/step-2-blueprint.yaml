tosca_definitions_version: cloudify_dsl_1_3

description: >
  This blueprint (step-2-blueprint.yaml) uses deployment outputs from step-1-blueprint.yaml.

imports:
  - http://www.getcloudify.org/spec/cloudify/4.0/types.yaml
  - https://raw.githubusercontent.com/cloudify-incubator/cloudify-utilities-plugin/v1.0.0/plugin.yaml

inputs:

  proxy_deployment_id:
    type: string
    default: simple

node_templates:

  step2:
    type: cloudify.nodes.DeploymentProxy
    properties:
      resource_config:
        deployment_id: { get_input: proxy_deployment_id }
        outputs:
          environment: _env
          application: _app

outputs:
  environment:
    description: "The environment data."
    value: { get_attribute: [ step2, _env ] }
  application:
    description: "The application info."
    value: { get_attribute: [ step2, _app ] }

